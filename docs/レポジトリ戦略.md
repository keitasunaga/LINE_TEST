# LINE DID/VCã‚¢ãƒ—ãƒª ãƒ¬ãƒã‚¸ãƒˆãƒªæˆ¦ç•¥

## ğŸ“‹ æ¦‚è¦

ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹æˆ¦ç•¥ã¨ãƒãƒ«ãƒãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œã‚’è€ƒæ…®ã—ãŸã€3ãƒ¬ãƒã‚¸ãƒˆãƒªæ§‹æˆã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆã€‚

### æˆ¦ç•¥ã®èƒŒæ™¯
- **ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹å…¬é–‹**: ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–ã«ã‚ˆã‚‹è²¢çŒ®ã—ã‚„ã™ã•
- **ãƒãƒ«ãƒãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œ**: LINEã€WhatsAppã€Slackç­‰ã¸ã®æ‹¡å¼µ
- **ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æŠ½è±¡åŒ–**: å…±é€šAPIã«ã‚ˆã‚‹é–‹ç™ºåŠ¹ç‡å‘ä¸Š

## ğŸ—ï¸ ãƒ¬ãƒã‚¸ãƒˆãƒªæ§‹æˆï¼ˆå…¨ä½“ï¼‰

```
did-vc-service/           # ğŸ›ï¸ DID/VCã‚³ã‚¢ã‚µãƒ¼ãƒ“ã‚¹
messaging-platform/      # ğŸ“± ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°çµ±åˆãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ   
web-ui-platform/         # ğŸ¨ çµ±åˆWebã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
```

**è¨ˆ3ãƒ¬ãƒã‚¸ãƒˆãƒª** ã§æ§‹æˆã—ã€å„ãƒ¬ãƒã‚¸ãƒˆãƒªå†…ã¯ãƒ¢ãƒãƒ¬ãƒç®¡ç†

## ğŸ“¦ å„ãƒ¬ãƒã‚¸ãƒˆãƒªã®è©³ç´°è¨­è¨ˆ

### 1. did-vc-service/ ï¼ˆDID/VCã‚³ã‚¢ã‚µãƒ¼ãƒ“ã‚¹ï¼‰

```
did-vc-service/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ did/
â”‚   â”‚   â”œâ”€â”€ DIDGenerator.ts       # DIDç”Ÿæˆ
â”‚   â”‚   â”œâ”€â”€ DIDResolver.ts        # DIDè§£æ±º
â”‚   â”‚   â””â”€â”€ DIDStorage.ts         # DIDä¿å­˜
â”‚   â”œâ”€â”€ vc/
â”‚   â”‚   â”œâ”€â”€ VCIssuer.ts           # VCç™ºè¡Œ
â”‚   â”‚   â”œâ”€â”€ VCVerifier.ts         # VCæ¤œè¨¼
â”‚   â”‚   â””â”€â”€ VCStorage.ts          # VCä¿å­˜
â”‚   â”œâ”€â”€ blockchain/
â”‚   â”‚   â”œâ”€â”€ ContractDeployer.ts   # ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆ
â”‚   â”‚   â”œâ”€â”€ TransactionManager.ts # ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†
â”‚   â”‚   â””â”€â”€ ChainConnector.ts     # ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³æ¥ç¶š
â”‚   â””â”€â”€ storage/
â”‚       â”œâ”€â”€ DatabaseRepository.ts # DBæ“ä½œ
â”‚       â””â”€â”€ FileStorage.ts        # ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜
â”œâ”€â”€ tests/
â”œâ”€â”€ docs/
â””â”€â”€ package.json
```

**NPMå…¬é–‹**: `@your-org/did-vc-service`

### 2. messaging-platform/ ï¼ˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°çµ±åˆNestJSã‚¢ãƒ—ãƒªï¼‰

```
messaging-platform/
â”œâ”€â”€ libs/
â”‚   â””â”€â”€ messaging-core/           # æŠ½è±¡åŒ–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆNPMå…¬é–‹ç”¨ï¼‰
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ abstract/
â”‚       â”‚   â”‚   â”œâ”€â”€ messaging-adapter.abstract.ts
â”‚       â”‚   â”‚   â””â”€â”€ message-types.ts
â”‚       â”‚   â””â”€â”€ interfaces/
â”‚       â””â”€â”€ package.json
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ core/                     # NestJSå…±é€šãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”‚   â”‚   â”œâ”€â”€ core.module.ts
â”‚   â”‚   â””â”€â”€ interfaces/
â”‚   â”œâ”€â”€ adapters/                 # ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ç¾¤
â”‚   â”‚   â”œâ”€â”€ line/
â”‚   â”‚   â”‚   â”œâ”€â”€ line-adapter.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ line-adapter.module.ts
â”‚   â”‚   â”‚   â””â”€â”€ line.controller.ts
â”‚   â”‚   â”œâ”€â”€ whatsapp/
â”‚   â”‚   â”‚   â”œâ”€â”€ whatsapp-adapter.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ whatsapp-adapter.module.ts
â”‚   â”‚   â”‚   â””â”€â”€ whatsapp.controller.ts
â”‚   â”‚   â””â”€â”€ slack/
â”‚   â”‚       â”œâ”€â”€ slack-adapter.service.ts
â”‚   â”‚       â”œâ”€â”€ slack-adapter.module.ts
â”‚   â”‚       â””â”€â”€ slack.controller.ts
â”‚   â”œâ”€â”€ app.module.ts
â”‚   â””â”€â”€ main.ts
â”œâ”€â”€ examples/
â”‚   â”œâ”€â”€ line-integration/
â”‚   â””â”€â”€ multi-platform-setup/
â”œâ”€â”€ docs/
â”œâ”€â”€ package.json
â””â”€â”€ nest-cli.json
```

**å…¬é–‹æˆ¦ç•¥**:
- `@your-org/messaging-core` ï¼ˆNPMãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼‰
- NestJSã‚¢ãƒ—ãƒªå…¨ä½“ã¯GitHub Templateã¨ã—ã¦å…¬é–‹

### 3. web-ui-platform/ ï¼ˆçµ±åˆWebã‚¢ãƒ—ãƒªï¼‰

```
web-ui-platform/
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ shared/                   # å…±é€šãƒ­ã‚¸ãƒƒã‚¯ãƒ»å‹å®šç¾©
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ hooks/useDID.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ services/didService.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ types/index.ts
â”‚   â”‚   â”‚   â””â”€â”€ utils/platform.ts
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â””â”€â”€ components/               # å…±é€šUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ DIDCard.tsx
â”‚       â”‚   â”œâ”€â”€ VCViewer.tsx
â”‚       â”‚   â”œâ”€â”€ QRGenerator.tsx
â”‚       â”‚   â””â”€â”€ shared/
â”‚       â””â”€â”€ package.json
â””â”€â”€ apps/
    â””â”€â”€ web-app/                  # å˜ä¸€Next.jsã‚¢ãƒ—ãƒª
        â”œâ”€â”€ src/
        â”‚   â”œâ”€â”€ app/
        â”‚   â”‚   â”œâ”€â”€ line/         # LINEç”¨ãƒšãƒ¼ã‚¸
        â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard/page.tsx
        â”‚   â”‚   â”‚   â””â”€â”€ did-info/page.tsx
        â”‚   â”‚   â”œâ”€â”€ whatsapp/     # WhatsAppç”¨ãƒšãƒ¼ã‚¸
        â”‚   â”‚   â”œâ”€â”€ slack/        # Slackç”¨ãƒšãƒ¼ã‚¸
        â”‚   â”‚   â””â”€â”€ api/          # å…±é€šAPI
        â”‚   â”œâ”€â”€ components/
        â”‚   â”‚   â”œâ”€â”€ platform/     # ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å›ºæœ‰UI
        â”‚   â”‚   â”‚   â”œâ”€â”€ LINELayout.tsx
        â”‚   â”‚   â”‚   â”œâ”€â”€ WhatsAppLayout.tsx
        â”‚   â”‚   â”‚   â””â”€â”€ SlackLayout.tsx
        â”‚   â”‚   â””â”€â”€ shared/       # å…±é€šUI
        â”‚   â”œâ”€â”€ middleware.ts     # ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åˆ†å²
        â”‚   â””â”€â”€ hooks/
        â”œâ”€â”€ next.config.js
        â””â”€â”€ package.json
```

**NPMå…¬é–‹**:
- `@your-org/web-ui-shared`
- `@your-org/web-ui-components`

## ğŸ¯ ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œæˆ¦ç•¥

### ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æŠ½è±¡åŒ–
```typescript
// messaging-platform-core
export abstract class MessagingAdapter {
  abstract sendTextMessage(userId: string, text: string): Promise<void>
  abstract sendWebAppUrl(userId: string, url: string): Promise<void>
  abstract getUserProfile(userId: string): Promise<UserProfile>
  abstract handleWebhook(payload: any): Promise<WebhookEvent[]>
}

// å…±é€šã®ã‚¤ãƒ™ãƒ³ãƒˆå‹
export interface WebhookEvent {
  type: 'message' | 'follow' | 'unfollow'
  userId: string
  message?: Message
  platform: 'line' | 'whatsapp' | 'slack'
}
```

### UIå±¤ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åˆ†å²
```typescript
// web-ui-platform/apps/web-app/src/middleware.ts
export function middleware(request: NextRequest) {
  const userAgent = request.headers.get('user-agent') || ''
  const url = request.nextUrl.clone()
  
  // ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æ¤œå‡ºã«ã‚ˆã‚‹ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°åˆ†å²
  if (userAgent.includes('Line')) {
    url.pathname = `/line${url.pathname}`
    return NextResponse.rewrite(url)
  }
  
  if (userAgent.includes('WhatsApp')) {
    url.pathname = `/whatsapp${url.pathname}`
    return NextResponse.rewrite(url)
  }
  
  return NextResponse.next()
}
```

## ğŸš€ æ®µéšçš„å®Ÿè£…ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

### Phase 1: ã‚³ã‚¢æ©Ÿèƒ½é–‹ç™ºï¼ˆç¾åœ¨ï¼‰
- [ ] `did-vc-service` ã®åŸºæœ¬å®Ÿè£…
- [ ] `messaging-platform-line` ã®å®Ÿè£…
- [ ] `web-ui-platform` ã®LINEå¯¾å¿œ

### Phase 2: ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æŠ½è±¡åŒ–
- [ ] `messaging-platform-core` ã®æŠ½è±¡åŒ–
- [ ] LINE Adapterã®åˆ†é›¢
- [ ] å…±é€šUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æŠ½å‡º

### Phase 3: ãƒãƒ«ãƒãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å±•é–‹
- [ ] WhatsApp Adapterè¿½åŠ 
- [ ] Slack Adapterè¿½åŠ 
- [ ] ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å›ºæœ‰UIå®Ÿè£…

### Phase 4: ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹å…¬é–‹
- [ ] å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®NPMå…¬é–‹
- [ ] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™
- [ ] ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªä½œæˆ
- [ ] ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£å½¢æˆ

## ğŸ“‹ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### did-vc-service
- **Language**: TypeScript
- **Runtime**: Node.js
- **Database**: PostgreSQL + Prisma
- **Blockchain**: Ethereum/Polygon
- **Testing**: Jest

### messaging-platform
- **Language**: TypeScript
- **Framework**: å„ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®SDK
- **Testing**: Jest + ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å›ºæœ‰ãƒ†ã‚¹ãƒˆ
- **Build**: Lerna/pnpm workspaces

### web-ui-platform
- **Framework**: Next.js 15
- **Language**: TypeScript
- **Styling**: Tailwind CSS
- **State**: Zustand
- **Testing**: Jest + Playwright

## ğŸ”§ é–‹ç™ºãƒ»é‹ç”¨æ–¹é‡

### ãƒ¢ãƒãƒ¬ãƒç®¡ç†
- **messaging-platform**: pnpm workspaces
- **web-ui-platform**: pnpm workspaces
- **did-vc-service**: å˜ä¸€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

### CI/CDæˆ¦ç•¥
- å„ãƒ¬ãƒã‚¸ãƒˆãƒªç‹¬ç«‹ã®GitHub Actions
- ä¾å­˜é–¢ä¿‚ã®æ›´æ–°ã¯è‡ªå‹•PRä½œæˆ
- ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³
- ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã‚­ãƒ¼ã®å®‰å…¨ãªç®¡ç†
- å®šæœŸçš„ãªä¾å­˜é–¢ä¿‚æ›´æ–°

## ğŸ‰ æœŸå¾…ã•ã‚Œã‚‹æˆæœ

### é–‹ç™ºåŠ¹ç‡
- **å‹å®‰å…¨æ€§**: å…¨ãƒ¬ãƒã‚¸ãƒˆãƒªã§ã®å‹å…±æœ‰
- **å†åˆ©ç”¨æ€§**: å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ç‹¬ç«‹åˆ©ç”¨
- **æ‹¡å¼µæ€§**: æ–°ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ è¿½åŠ ã®å®¹æ˜“ã•

### ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹æˆ¦ç•¥
- **ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–**: å¿…è¦ãªæ©Ÿèƒ½ã®ã¿åˆ©ç”¨å¯èƒ½
- **ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£**: å„ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®å°‚é–€å®¶ã«ã‚ˆã‚‹è²¢çŒ®
- **ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ **: DID/VCã‚¢ãƒ—ãƒªé–‹ç™ºã®æ¨™æº–ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ 

---

**æ›´æ–°æ—¥**: 2024å¹´12æœˆ19æ—¥
**ä½œæˆè€…**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­è¨ˆãƒãƒ¼ãƒ  